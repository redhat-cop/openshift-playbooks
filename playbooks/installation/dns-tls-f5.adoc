= OpenShift DNS, SSL/TLS and Load Balancer(F5) Configuration

== Internal OpenShift Usage

Used by OpenShift nodes to communicate with master.

[options="none"]
|===
| Sample DNS Entry |
*internal.openshift.corp.example.com* +
- Typically points to VIP on load-balancer
| SSL Certificate |
Must be provided by the internal OpenShift Certificate Authority.
| Load Balancer Configuration |

- Typically exposes port 8443 +
- TLS pass-through with TLS terminated by OpenShift masters +
- Load balanced between port 8443 on OpenShift masters +

TLS pass-through is required on the load-balancer since OpenShift uses client certificates to authenticate nodes.

|===

== External OpenShift Web-Console and API Access

Used for all external access to the API and web console

[options="none"]
|===
|Sample DNS Entry |
*master.openshift.corp.example.com* +
- Typically points to VIP on load-balancer +
- Can share VIP with internal usage provided TLS pass-through is used.

| SSL Certificate |
Should be generated by customer's certificate authority
|Load Balancer Configuration +
Option 1
|

For a single VIP shared between internal and external use +
- Typically exposes port 8443 +
- TLS pass-through - TLS terminated by OpenShift masters +
- Load balanced between port 8443 on masters +

|Load Balancer Configuration +
Option 2
|

Requires dedicated VIP +

- Typically exposes port 8443 +
- TLS termination at load balancer - will need to re-encrypt +
- Load balanced between port 8443 on masters +
|===

== OpenShift Applications

Used to access applications hosted by OpenShift

[options="none"]
|===
| Sample DNS Entry |

**.cloudapps.openshift.corp.example.com* - Wildcard DNS +
- A dedicated sub-domain is highly recommended when using wildcards +
- Typically points to VIP on load balancer. If needed, can share VIP with 1 and/or 2 above.

|SSL Certificate|

Wildcard SSL certificate for *.cloudapps.openshift.corp.example.com which should be generated by customer's certificate authority.

|Load Balancer Configuration +
Option 1
|
- Port 443 exposed +
- SSL terminated on load balancer +
- Either re-encrypt and load balanced between port 443 on OpenShift routers +
- Or passed unencrypted to port 80 on OpenShift routers +
- Recommend redirecting port 80 at load-balancer to port 443 +

|Load Balancer Configuration +
Option 2
|
- Port 443 exposed +
- TLS pass-through - SSL terminated on OpenShift routers +
- load balanced between port 443 on OpenShift routers +
- Recommend redirecting port 80 at load-balancer to port 443 +

This option recommended for organizations that do not permit wildcard SSL certificates.
|====
